@using Scada.Web.TreeView
@inject AppData appData
@{
    Layout = "_BasicLayout";
    dynamic dict = Locale.GetDictionary("Scada.Web.Pages.Shared._MainLayout");
    var displayOptions = appData.Config.DisplayOptions;
    var username = "admin";

    // tree view examples
    var menuRenderer = new TreeViewRenderer();
    var explorerRenderer = new TreeViewRenderer(new TreeViewRenderer.Options 
    {
        ExpanderLeft = true,
        ShowIcons = true,
        FolderIconUrl = Url.Content("~/images/treeview/folder.png"),
        NodeIconUrl = Url.Content("~/images/treeview/document.png")
    });
}

@section Styles {
    <link href="~/css/layout/main-layout.min.css" rel="stylesheet" asp-append-version="true" />
    @RenderSection("Styles", required: false)
}

@section Scripts {
    <script src="~/js/layout/tree-view.js" asp-append-version="true"></script>
    <script src="~/js/layout/notif-panel.js" asp-append-version="true"></script>
    <script src="~/js/layout/main-layout.js" asp-append-version="true"></script>
    <script>
        appEnv = @WebUtils.GetEnvironmentJs(Url);
        notifPhrases = @WebUtils.DictionaryToJs("Scada.Web.Pages.Shared._MainLayout.NotifPanel");
    </script>
    @RenderSection("Scripts", required: false)
}

@if (displayOptions.ShowHeader)
{
    <div id="Main_divHeader">
        <div class="main-hdr-block left">@*
            *@<span id="Main_spanMenuBtn" class="main-hdr-btn" title="@dict.spanMenuBtn_ToolTip"><i class="fas fa-bars"></i></span>@*
            *@<span id="Main_spanAppTitle">@CommonPhrases.ProductName</span>
        </div>

        <div class="main-hdr-block right">@*
            *@<span id="Main_spanNotifBtn" class="main-hdr-btn notif-bell" title="@dict.spanNotifBtn_ToolTip"><i class="far fa-bell"></i></span>@*
            *@<span id="Main_spanProfileBtn" class="main-hdr-btn">@username</span>@*
            *@<a asp-area="" asp-page="/Logout"><span id="Main_spanLogoutBtn" class="main-hdr-btn">@dict.spanLogoutBtn</span></a>@*
            *@<span id="Main_spanFullscreenBtn" class="main-hdr-btn" title="@dict.spanFullscreenBtn_ToolTip"><i class="fas fa-expand"></i></span>
        </div>
    </div>
}

<div id="Main_divNoHeaderMenu">@*
    *@<span id="Main_spanMenuBtn2" class="main-hdr-btn" title="@dict.spanMenuBtn_ToolTip"><i class="fas fa-bars"></i></span>@*
    *@<span id="Main_spanNotifBtn2" class="main-hdr-btn notif-bell" title="@dict.spanNotifBtn_ToolTip"><i class="far fa-bell"></i></span>@*
    *@<span id="Main_spanProfileBtn2" class="main-hdr-btn" title="@dict.spanProfileBtn_ToolTip"><i class="fas fa-user"></i></span>@*
    *@<a asp-area="" asp-page="/Logout"><span id="Main_spanLogoutBtn2" class="main-hdr-btn" title="@dict.spanLogoutBtn_ToolTip"><i class="fas fa-sign-out-alt"></i></span></a>@*
    *@<span id="Main_spanFullscreenBtn2" class="main-hdr-btn" title="@dict.spanFullscreenBtn_ToolTip"><i class="fas fa-expand"></i></span>@*
    *@<span id="Main_spanExitFullscreenBtn" class="main-hdr-btn" title="@dict.spanExitFullscreenBtn_ToolTip"><i class="fas fa-compress"></i></span>
</div>

@if (displayOptions.ShowMainMenu || displayOptions.ShowViewExplorer)
{
    <div id="Main_divLeftPanel">
        <div id="Main_divTabPanel">
            <div id="Main_divMainMenuTab" class="tab" data-tool-window="Main_divMainMenu">@dict.divMainMenuTab</div>
            <div id="Main_divViewExplorerTab" class="tab" data-tool-window="Main_divViewExplorer">@dict.divViewExplorerTab</div>
        </div>
        @if (displayOptions.ShowMainMenu)
        {
            <div id="Main_divMainMenu" class="tool-window hidden">@menuRenderer.RenderHtml(TreeViewExample.GetMainMenu())</div>
        }
        @if (displayOptions.ShowViewExplorer)
        { 
            <div id="Main_divViewExplorer" class="tool-window hidden">@explorerRenderer.RenderHtml(TreeViewExample.GetViewExplorer())</div> 
        }
    </div>
}

<div id="Main_divContent">
    @RenderBody()
</div>

@if (!string.IsNullOrEmpty(appData.Config.PluginAssignment.NotificationFeature))
{
    <div id="Main_divNotifPanel" class="notif-panel hidden"></div>
}
